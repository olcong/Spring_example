# -*- coding: utf-8 -*-
import serial
import adafruit_fingerprint

# μ΄ μ¤ν¬λ¦½νΈλ” μ¤μ§ μ§€λ¬Έ μ„Όμ„λ§ ν…μ¤νΈν•©λ‹λ‹¤.

print("μ§€λ¬Έ μ„Όμ„ μ—°κ²° ν…μ¤νΈλ¥Ό μ‹μ‘ν•©λ‹λ‹¤...")

try:
    # λΌμ¦λ² λ¦¬νμ΄μ ν•λ“μ›¨μ–΄ μ‹λ¦¬μ–Ό ν¬νΈμ— μ—°κ²° μ‹λ„
    uart = serial.Serial("/dev/ttyS0", baudrate=57600, timeout=1)

    # μ§€λ¬Έ μ„Όμ„ λΌμ΄λΈλ¬λ¦¬ μ΄κΈ°ν™”
    finger = adafruit_fingerprint.Adafruit_Fingerprint(uart)

    # μ„Όμ„μ™€ ν†µμ‹ μ΄ λλ”μ§€ ν™•μΈ (μ•”νΈ ν™•μΈ)
    if finger.verify_password():
        print("\n======================================")
        print("  π‰ μ§€λ¬Έ μ„Όμ„ μ—°κ²° μ„±κ³µ! π‰")
        print("======================================")
        print(f"μ„Όμ„μ— μ €μ¥λ μ§€λ¬Έ μ: {finger.template_count}")
    else:
        print("\n======================================")
        print("  π­ μ§€λ¬Έ μ„Όμ„ μ—°κ²° μ‹¤ν¨! π­")
        print("======================================")
        print("μ„Όμ„λ΅λ¶€ν„° μ‘λ‹µμ΄ μ—†μµλ‹λ‹¤. λ°°μ„ μ„ λ‹¤μ‹ ν™•μΈν•΄μ£Όμ„Έμ”.")

except Exception as e:
    print("\nμ¤ν¬λ¦½νΈ μ‹¤ν–‰ μ¤‘ μ‹¬κ°ν• μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤.")
    print(f"μ¤λ¥ λ‚΄μ©: {e}")
